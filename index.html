<!--https://www.npmjs.com/package/react-easy-transition-->

<html>
    <head>Testing</head>
    
    <div id="app"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.1.0/umd/react.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.1.0/umd/react-dom.development.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.min.js"></script>
    
    <script type="text/babel">
        const region_width = 100;
        const region_height = 200;
        const region_margin = 20;
        
        // let RegionStyles = {
        //     height: region_width,
        //     width: region_height,
        //     backgroundColor: 'dddddd',
        //     transition: '2.5s'
        // };
        
        // let ColorChangeStyle = {
        //     backgroundColor: '000000',
        //     // marginLeft: 500
        // }
        
        class Region extends React.Component {
            getRegionStyles(){
                let defaultStyle = regionDefaultStyle(this.props.index);
                return (this.props.alternateColor ? Object.assign({}, defaultStyle, colorChangedStyle) : defaultStyle);
            }
            
            regionDefaultStyle(index){
                height: region_width,
                width: region_height,
                backgroundColor: 'dddddd',
                transition: '2.5s',
                marginLeft: getPosition(index)
            }
            
            let colorChangedStyle = {
                backgroundColor: '000000'
            }
            
            getPosition(index){
                return (region_width * (index +1)) + (region_margin * index);
            }
            
            render(){
                return(
                    <div style={this.getRegionStyles()}></div>
                )
            }
        }
        
        const Item = (props) =>{
            return (
                <div>
                    <p style = {props.styles}>Item info</p>
                </div>
                
            );
        }
    
       class App extends React.Component {
           constructor(props) {
             super(props);
             this.state = {
               thing: 'state info',
               styles: {
                   color: 'red',
                   borderColor: 'black',
                   borderWidth: 0.5,
                   transition: '10.5s',
               },
               colorChange: false,
               regionInstances: 0
             };
             
             this.toggleColor = this.toggleColor.bind(this);
           }
           
            toggleColor(event){
                this.setState({
                    colorChange: !this.state.colorChange
                });
            }
            
            getCurrentRegionIndex(){
                this.setState({
                    regionInstances: this.state.regionInstances++
                });
                
                return this.state.regionInstances;
            }
            
           render() {
               return (
                   <div>
                        <h1 style={this.state.styles}>Rendering Component</h1>
                        {this.props.thing}
                        {this.state.thing}
                        <Item styles={this.state.styles}/>
                        Rendering region:
                        <Region alternateColor={this.state.colorChange} index={this.getCurrentRegionIndex()} />
                        <button onClick={this.toggleColor}>Test Button</button>
                   </div>
               )
           }
       }
       
       ReactDOM.render(
           <App thing="stuff" />, document.getElementById('app')
        );
    </script>
</html>